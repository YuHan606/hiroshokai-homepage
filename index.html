// 国家展示功能
  function showCountry(index) {
    // 隐藏所有标签
    document.querySelectorAll('.country-label').forEach(label => {
      label.classList.remove('active');
    });
    
    if (index < seaCountries.length) {
      const country = seaCountries[index];
      const label = document.getElementById(`label-${country.name}`);
      
      // 计算屏幕位置
      const vector = new THREE.Vector3();
      const marker = countryMarkers[index];
      vector.setFromMatrixPosition(marker.matrixWorld);
      vector.project(camera);
      
      const x = (vector.x * 0.5 + 0.5) * container.offsetWidth;
      const y = (vector.y * -0.5 + 0.5) * container.offsetHeight;
      
      // 设置标签位置和显示
      label.style.left = x + 'px';
      label.style.top = (y - 60) + 'px';
      label.classList.add('active');
      
      // 设置地球旋转目标
      rotationTarget = -country.longitude * (Math.PI / 180) + Math.PI;
      showingCountry = true;
      
      // 高亮标记
      countryMarkers.forEach((marker, i) => {
        if (i === index) {
          marker.scale.setScalar(3);
          marker.material.opacity = 1;
        } else {
          marker.scale.setScalar(1);
          marker.material.opacity = 0.5;
        }
      });
    }
  }
  
  // 自动循环展示国家
  function startCountryLoop() {
    setInterval(() => {
      showCountry(currentCountryIndex);
      currentCountryIndex = (currentCountryIndex + 1) % seaCountries.length;
    }, 4000); // 每4秒切换一个国家
  }
  
  // 延迟开始循环，让地球先转一下
  setTimeout(() => {
    startCountryLoop();
  }, 2000);
  
  // 更新标签位置的函数
  function updateCountryLabels() {
    countryMarkers.forEach((marker, index) => {
      const vector = new THREE.Vector3();
      vector.setFromMatrixPosition(marker.matrixWorld);
      vector.project(camera);
      
      const x = (vector.x * 0.5 + 0.5) * container.offsetWidth;
      const y = (vector.y * -0.5 + 0.5) * container.offsetHeight;
      
      const country = seaCountries[index];
      const label = document.getElementById(`label-${country.name}`);
      
      // 只更新当前显示的标签位置
      if (label.classList.contains('active')) {
        label.style.left = x + 'px';
        label.style.top = (y - 60) + 'px';
        
        // 检查是否在可见范围内
        if (vector.z > 0) {
          label.style.opacity = '0';
        } else {
          label.style.opacity = '1';
        }
      }
    });
  }  // 动画循环 - 更流畅的动画和国家展示
  function animate() {
    requestAnimationFrame(animate);
    
    const time = Date.now() * 0.0005;
    
    // 地球自转
    if (showingCountry) {
      // 平滑转向目标国家
      const diff = rotationTarget - earth.rotation.y;
      earth.rotation.y += diff * 0.02;
      clouds.rotation.y = earth.rotation.y + 0.1;
      
      // 检查是否接近目标
      if (Math.abs(diff) < 0.01) {
        showingCountry = false;
      }
    } else {
      // 正常缓慢自转
      earth.rotation.y += 0.002;
      clouds.rotation.y += 0.003;
    }
    
    // 更新标记位置
    countryMarkers.forEach(marker => {
      // 让标记跟随地球旋转
      const originalPosition = marker.userData.originalPosition || marker.position.clone();
      if (!marker.userData.originalPosition) {
        marker.userData.originalPosition = originalPosition;
      }
      
      const rotatedPosition = originalPosition.clone();
      rotatedPosition.applyAxisAngle(new THREE.Vector3(0, 1, 0), earth.rotation.y);
      marker.position.copy(rotatedPosition);
    });
    
    // 鼠标交互
    camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
    camera.position.y += (-mouseY * 0.5 - camera.position.y) * 0.05;
    camera.lookAt(scene.position);
    
    // 更新国家标签位置
    updateCountryLabels();
    
    renderer.render(scene, camera);
  }
  
  animate();<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Home - 広昌会協同組合</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    header {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(240,248,255,0.95) 100%);
      padding: 0;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.2);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    header h1 {
      text-align: center;
      margin: 0;
      color: #2c3e50;
      font-size: 2.8rem;
      font-weight: 700;
      padding: 20px 0 10px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    nav {
      background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
      padding: 0;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 60px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    nav li {
      flex: 1;
      text-align: center;
      border-right: 1px solid rgba(255,255,255,0.2);
      position: relative;
      overflow: hidden;
    }
    
    nav li:last-child {
      border-right: none;
    }
    
    nav li::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.6s ease;
    }
    
    nav li:hover::before {
      left: 100%;
    }
    
    nav a {
      display: block;
      text-decoration: none;
      color: white;
      font-weight: 600;
      padding: 18px 20px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      z-index: 2;
      font-size: 0.95rem;
      letter-spacing: 0.5px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    
    nav a:hover {
      color: #667eea;
      background: rgba(255,255,255,0.95);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    section {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: rgba(255, 255, 255, 0.95);
      margin-top: 20px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      backdrop-filter: blur(10px);
    }
    
    #globe-container {
      width: 500px;
      height: 500px;
      margin: 30px auto;
      border-radius: 20px;
      box-shadow: 
        0 20px 60px rgba(0,0,0,0.2),
        0 0 20px rgba(0,0,0,0.1);
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      position: relative;
      overflow: visible;
    }
    
    .country-label {
      position: absolute;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
      white-space: nowrap;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transform: translateX(-50%) translateY(-50%);
      z-index: 1000;
      opacity: 0;
      transition: all 0.5s ease;
      pointer-events: none;
    }
    
    .country-label.active {
      opacity: 1;
      transform: translateX(-50%) translateY(-50%) scale(1.1);
    }
    
    .country-label::before {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-top: 8px solid #667eea;
    }
    
    @keyframes pulse {
      0%, 100% { transform: translateX(-50%) translateY(-50%) scale(1.1); }
      50% { transform: translateX(-50%) translateY(-50%) scale(1.2); }
    }
    
    .country-label.active {
      animation: pulse 2s ease-in-out infinite;
    }
    
    h2 {
      text-align: center;
      color: #2c3e50;
      font-size: 1.8rem;
      margin: 40px 0 30px 0;
    }
    
    section ul {
      max-width: 800px;
      margin: 0 auto;
      padding: 0;
    }
    
    section li {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      margin: 15px 0;
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transform: translateX(-10px);
      opacity: 0;
      animation: slideIn 0.6s ease forwards;
      animation-delay: calc(var(--i) * 0.1s);
    }
    
    section li:nth-child(1) { --i: 1; }
    section li:nth-child(2) { --i: 2; }
    section li:nth-child(3) { --i: 3; }
    section li:nth-child(4) { --i: 4; }
    section li:nth-child(5) { --i: 5; }
    section li:nth-child(6) { --i: 6; }
    section li:nth-child(7) { --i: 7; }
    
    @keyframes slideIn {
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    section p {
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #e74c3c;
      margin: 40px 0;
      padding: 20px;
      background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
      border-radius: 15px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    footer {
      text-align: center;
      padding: 30px;
      background: rgba(44, 62, 80, 0.9);
      color: white;
      margin-top: 40px;
    }
    
    canvas { 
      display: block; 
      border-radius: 50%;
    }
    
    /* 响应式设计 */
    @media (max-width: 1024px) {
      nav ul {
        flex-wrap: wrap;
        height: auto;
      }
      
      nav li {
        flex: 1 1 calc(50% - 1px);
        border-right: 1px solid rgba(255,255,255,0.2);
        border-bottom: 1px solid rgba(255,255,255,0.2);
      }
      
      nav li:nth-child(2n) {
        border-right: none;
      }
      
      nav li:nth-last-child(-n+2) {
        border-bottom: none;
      }
    }
    
    @media (max-width: 768px) {
      #globe-container {
        width: 350px;
        height: 350px;
      }
      
      header h1 {
        font-size: 2.2rem;
        padding: 15px 0 8px 0;
      }
      
      nav ul {
        flex-direction: column;
        height: auto;
      }
      
      nav li {
        flex: none;
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(255,255,255,0.2);
      }
      
      nav li:last-child {
        border-bottom: none;
      }
      
      nav a {
        padding: 15px 20px;
        font-size: 1rem;
      }
    }
    
    @media (max-width: 480px) {
      #globe-container {
        width: 280px;
        height: 280px;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>広昌会協同組合</h1>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="overview.html">組合概要</a></li>
      <li><a href="ginou.html">技能実習</a></li>
      <li><a href="tokutei.html">特定技能</a></li>
      <li><a href="sending.html">送り出し紹介</a></li>
      <li><a href="training.html">研修センター紹介</a></li>
      <li><a href="contact.html">お問い合わせ</a></li>
    </ul>
  </nav>
</header>

<section>
  <!-- 3D地球 -->
  <div id="globe-container">
    <div class="country-label" id="label-indonesia">インドネシア</div>
    <div class="country-label" id="label-myanmar">ミャンマー</div>
    <div class="country-label" id="label-china">中国</div>
    <div class="country-label" id="label-cambodia">カンボジア</div>
    <div class="country-label" id="label-vietnam">ベトナム</div>
    <div class="country-label" id="label-nepal">ネパール</div>
  </div>
  
  <h2>今のような疑問や不安をお持ちではないでしょうか？</h2>
  <ul>
    <li>外国人スタッフを雇用したいけど、どうしたらいいかわからない</li>
    <li>言葉は、通じるの・・・</li>
    <li>仕事の内容は伝わるの</li>
    <li>習慣や文化は大丈夫なの</li>
    <li>ビザの更新とか手続きが面倒じゃないの</li>
    <li>外国人はいい加減なんじゃないの</li>
    <li>過去に失敗した経験がある</li>
  </ul>
  <p>このお悩み広昌会協同組合が解決します!</p>
</section>

<footer>
  <p>&copy; 2025 広昌会協同組合</p>
</footer>

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
  const container = document.getElementById("globe-container");
  const width = container.offsetWidth;
  const height = container.offsetHeight;
  
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, width/height, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({
    antialias: true,
    alpha: true
  });
  
  renderer.setSize(width, height);
  renderer.setClearColor(0x000000, 0);
  container.appendChild(renderer.domElement);
  
  // 创建地球几何体
  const geometry = new THREE.SphereGeometry(1.8, 64, 64);
  
  // 创建真实的地球纹理
  function createRealisticEarthTexture() {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 2048;
    canvas.height = 1024;
    
    // 海洋颜色
    const oceanGradient = ctx.createRadialGradient(
      canvas.width/2, canvas.height/2, 0,
      canvas.width/2, canvas.height/2, canvas.width/2
    );
    oceanGradient.addColorStop(0, '#4A90E2');
    oceanGradient.addColorStop(0.5, '#357ABD');
    oceanGradient.addColorStop(1, '#1E3A5F');
    
    ctx.fillStyle = oceanGradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // 绘制详细的大陆轮廓
    const continents = [
      // 亚洲 - 详细轮廓
      {
        name: 'asia',
        color: '#228B22',
        points: [
          // 中国
          {x: 1400, y: 300}, {x: 1500, y: 280}, {x: 1580, y: 320},
          {x: 1600, y: 380}, {x: 1550, y: 420}, {x: 1480, y: 400},
          {x: 1420, y: 360}, {x: 1400, y: 320},
          // 印度
          {x: 1300, y: 400}, {x: 1350, y: 380}, {x: 1380, y: 420},
          {x: 1370, y: 480}, {x: 1320, y: 500}, {x: 1290, y: 460},
          // 东南亚
          {x: 1480, y: 450}, {x: 1520, y: 480}, {x: 1550, y: 520},
          {x: 1580, y: 560}, {x: 1600, y: 580}, {x: 1620, y: 600},
          {x: 1580, y: 620}, {x: 1540, y: 600}, {x: 1500, y: 580},
          {x: 1460, y: 550}, {x: 1440, y: 520}, {x: 1460, y: 480}
        ]
      },
      // 欧洲
      {
        name: 'europe',
        color: '#32CD32',
        points: [
          {x: 1200, y: 250}, {x: 1280, y: 240}, {x: 1320, y: 280},
          {x: 1300, y: 320}, {x: 1250, y: 330}, {x: 1200, y: 300}
        ]
      },
      // 非洲
      {
        name: 'africa',
        color: '#DEB887',
        points: [
          {x: 1200, y: 350}, {x: 1280, y: 340}, {x: 1300, y: 400},
          {x: 1290, y: 500}, {x: 1270, y: 600}, {x: 1250, y: 650},
          {x: 1200, y: 640}, {x: 1180, y: 580}, {x: 1190, y: 480},
          {x: 1200, y: 400}
        ]
      },
      // 北美洲
      {
        name: 'north_america',
        color: '#228B22',
        points: [
          {x: 400, y: 200}, {x: 600, y: 180}, {x: 700, y: 220},
          {x: 720, y: 300}, {x: 680, y: 380}, {x: 600, y: 400},
          {x: 500, y: 390}, {x: 420, y: 340}, {x: 380, y: 280}
        ]
      },
      // 南美洲
      {
        name: 'south_america',
        color: '#DAA520',
        points: [
          {x: 600, y: 420}, {x: 680, y: 410}, {x: 700, y: 480},
          {x: 690, y: 580}, {x: 670, y: 680}, {x: 640, y: 720},
          {x: 600, y: 710}, {x: 580, y: 650}, {x: 590, y: 550},
          {x: 600, y: 470}
        ]
      },
      // 澳洲
      {
        name: 'australia',
        color: '#CD853F',
        points: [
          {x: 1600, y: 650}, {x: 1700, y: 640}, {x: 1750, y: 670},
          {x: 1740, y: 710}, {x: 1680, y: 720}, {x: 1620, y: 700}
        ]
      }
    ];
    
    // 绘制大陆
    continents.forEach(continent => {
      ctx.fillStyle = continent.color;
      ctx.beginPath();
      ctx.moveTo(continent.points[0].x, continent.points[0].y);
      continent.points.forEach(point => {
        ctx.lineTo(point.x, point.y);
      });
      ctx.closePath();
      ctx.fill();
      
      // 添加阴影效果
      ctx.fillStyle = 'rgba(0,0,0,0.2)';
      ctx.beginPath();
      ctx.moveTo(continent.points[0].x + 2, continent.points[0].y + 2);
      continent.points.forEach(point => {
        ctx.lineTo(point.x + 2, point.y + 2);
      });
      ctx.closePath();
      ctx.fill();
    });
    
    // 突出显示东南亚国家
    const seaCountries = [
      // インドネシア
      {
        name: 'indonesia',
        color: '#FF6B6B',
        points: [
          {x: 1500, y: 560}, {x: 1580, y: 580}, {x: 1620, y: 600},
          {x: 1600, y: 620}, {x: 1540, y: 610}, {x: 1480, y: 590}
        ]
      },
      // ミャンマー
      {
        name: 'myanmar',
        color: '#4ECDC4',
        points: [
          {x: 1380, y: 450}, {x: 1420, y: 440}, {x: 1440, y: 480},
          {x: 1430, y: 520}, {x: 1400, y: 530}, {x: 1370, y: 500}
        ]
      },
      // 中国（东南部）
      {
        name: 'china',
        color: '#45B7D1',
        points: [
          {x: 1450, y: 380}, {x: 1520, y: 360}, {x: 1550, y: 400},
          {x: 1530, y: 440}, {x: 1480, y: 450}, {x: 1440, y: 420}
        ]
      },
      // カンボジア
      {
        name: 'cambodia',
        color: '#96CEB4',
        points: [
          {x: 1480, y: 480}, {x: 1510, y: 475}, {x: 1520, y: 495},
          {x: 1510, y: 510}, {x: 1485, y: 505}, {x: 1475, y: 490}
        ]
      },
      // ベトナム
      {
        name: 'vietnam',
        color: '#FECA57',
        points: [
          {x: 1500, y: 460}, {x: 1530, y: 450}, {x: 1545, y: 480},
          {x: 1535, y: 520}, {x: 1510, y: 530}, {x: 1490, y: 500}
        ]
      },
      // ネパール
      {
        name: 'nepal',
        color: '#FF9FF3',
        points: [
          {x: 1360, y: 400}, {x: 1390, y: 395}, {x: 1400, y: 410},
          {x: 1390, y: 420}, {x: 1365, y: 415}, {x: 1355, y: 405}
        ]
      }
    ];
    
    // 绘制东南亚国家
    seaCountries.forEach(country => {
      // 主体颜色
      ctx.fillStyle = country.color;
      ctx.beginPath();
      ctx.moveTo(country.points[0].x, country.points[0].y);
      country.points.forEach(point => {
        ctx.lineTo(point.x, point.y);
      });
      ctx.closePath();
      ctx.fill();
      
      // 添加高光
      ctx.fillStyle = 'rgba(255,255,255,0.3)';
      ctx.beginPath();
      ctx.moveTo(country.points[0].x, country.points[0].y);
      country.points.slice(0, 3).forEach(point => {
        ctx.lineTo(point.x, point.y);
      });
      ctx.closePath();
      ctx.fill();
      
      // 添加边框
      ctx.strokeStyle = 'rgba(255,255,255,0.8)';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(country.points[0].x, country.points[0].y);
      country.points.forEach(point => {
        ctx.lineTo(point.x, point.y);
      });
      ctx.closePath();
      ctx.stroke();
    });
    
    return new THREE.CanvasTexture(canvas);
  }
  
  // 创建法线贴图增强立体感
  function createNormalMap() {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 512;
    canvas.height = 256;
    
    // 填充中性法线色
    ctx.fillStyle = '#8080ff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // 添加一些随机的法线变化
    for(let i = 0; i < 1000; i++) {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height;
      const r = Math.floor(Math.random() * 50 + 100);
      const g = Math.floor(Math.random() * 50 + 100);
      const b = Math.floor(Math.random() * 50 + 200);
      
      ctx.fillStyle = `rgb(${r},${g},${b})`;
      ctx.beginPath();
      ctx.arc(x, y, Math.random() * 3 + 1, 0, Math.PI * 2);
      ctx.fill();
    }
    
    return new THREE.CanvasTexture(canvas);
  }
  
  // 创建高光贴图
  function createSpecularMap() {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 512;
    canvas.height = 256;
    
    // 海洋区域高反射
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // 陆地区域低反射
    ctx.fillStyle = '#333333';
    const landAreas = [
      {x: 350, y: 80, w: 120, h: 80},
      {x: 280, y: 70, w: 60, h: 50},
      {x: 280, y: 120, w: 50, h: 100},
      {x: 80, y: 60, w: 80, h: 120},
      {x: 120, y: 140, w: 40, h: 80},
      {x: 400, y: 180, w: 60, h: 40}
    ];
    
    landAreas.forEach(area => {
      ctx.fillRect(area.x, area.y, area.w, area.h);
    });
    
    return new THREE.CanvasTexture(canvas);
  }
  
  // 使用更真实的纹理
  const earthTexture = createRealisticEarthTexture();
  const normalMap = createNormalMap();
  const specularMap = createSpecularMap();
  
  const material = new THREE.MeshPhongMaterial({
    map: earthTexture,
    normalMap: normalMap,
    specularMap: specularMap,
    shininess: 100,
    transparent: false
  });
  
  const earth = new THREE.Mesh(geometry, material);
  scene.add(earth);
  
  // 添加大气层效果
  const atmosphereGeometry = new THREE.SphereGeometry(1.85, 64, 64);
  const atmosphereMaterial = new THREE.ShaderMaterial({
    transparent: true,
    side: THREE.BackSide,
    vertexShader: `
      varying vec3 vNormal;
      void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,
    fragmentShader: `
      varying vec3 vNormal;
      void main() {
        float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);
        gl_FragColor = vec4(0.3, 0.6, 1.0, 1.0) * intensity;
      }
    `
  });
  
  const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
  scene.add(atmosphere);
  
  // 添加更真实的云层
  const cloudGeometry = new THREE.SphereGeometry(1.83, 64, 64);
  const cloudTexture = createRealisticCloudTexture();
  const cloudMaterial = new THREE.MeshLambertMaterial({
    map: cloudTexture,
    transparent: true,
    opacity: 0.4
  });
  const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
  scene.add(clouds);
  
  function createRealisticCloudTexture() {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 1024;
    canvas.height = 512;
    
    ctx.fillStyle = 'rgba(0,0,0,0)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // 创建更真实的云朵
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    
    // 生成云系
    for(let i = 0; i < 50; i++) {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height;
      const size = Math.random() * 80 + 20;
      
      for(let j = 0; j < 20; j++) {
        const offsetX = (Math.random() - 0.5) * 100;
        const offsetY = (Math.random() - 0.5) * 40;
        const cloudSize = size * (0.5 + Math.random() * 0.5);
        
        ctx.globalAlpha = Math.random() * 0.6 + 0.2;
        ctx.beginPath();
        ctx.arc(x + offsetX, y + offsetY, cloudSize, 0, Math.PI * 2);
        ctx.fill();
      }
    }
    
    ctx.globalAlpha = 1;
    return new THREE.CanvasTexture(canvas);
  }
  
  // 设置白色背景和更自然的光照
  scene.background = new THREE.Color(0xffffff);
  
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(5, 3, 5);
  scene.add(directionalLight);
  
  // 不添加星空（白色背景）
  
  // 东南亚国家信息
  const seaCountries = [
    {
      name: 'indonesia',
      label: 'インドネシア',
      longitude: 118, // 经度
      latitude: -2,   // 纬度
      color: '#FF6B6B'
    },
    {
      name: 'myanmar',
      label: 'ミャンマー',
      longitude: 96,
      latitude: 22,
      color: '#4ECDC4'
    },
    {
      name: 'china',
      label: '中国',
      longitude: 116,
      latitude: 35,
      color: '#45B7D1'
    },
    {
      name: 'cambodia',
      label: 'カンボジア',
      longitude: 105,
      latitude: 12,
      color: '#96CEB4'
    },
    {
      name: 'vietnam',
      label: 'ベトナム',
      longitude: 108,
      latitude: 16,
      color: '#FECA57'
    },
    {
      name: 'nepal',
      label: 'ネパール',
      longitude: 85,
      latitude: 28,
      color: '#FF9FF3'
    }
  ];
  
  // 创建国家标记
  const countryMarkers = [];
  seaCountries.forEach(country => {
    // 将经纬度转换为3D坐标
    const phi = (90 - country.latitude) * (Math.PI / 180);
    const theta = (country.longitude + 180) * (Math.PI / 180);
    
    const x = -(1.85 * Math.sin(phi) * Math.cos(theta));
    const z = (1.85 * Math.sin(phi) * Math.sin(theta));
    const y = (1.85 * Math.cos(phi));
    
    // 创建标记几何体
    const markerGeometry = new THREE.SphereGeometry(0.02, 16, 16);
    const markerMaterial = new THREE.MeshBasicMaterial({ 
      color: country.color,
      transparent: true,
      opacity: 0.8
    });
    const marker = new THREE.Mesh(markerGeometry, markerMaterial);
    marker.position.set(x, y, z);
    marker.userData = country;
    
    scene.add(marker);
    countryMarkers.push(marker);
  });
  
  let currentCountryIndex = 0;
  let rotationTarget = 0;
  let showingCountry = false;
  
  createStarField();
  
  camera.position.z = 4;
  
  // 鼠标交互
  let mouseX = 0;
  let mouseY = 0;
  
  container.addEventListener('mousemove', (event) => {
    const rect = container.getBoundingClientRect();
    mouseX = (event.clientX - rect.left) / width - 0.5;
    mouseY = (event.clientY - rect.top) / height - 0.5;
  });
  
  // 动画循环
  function animate() {
    requestAnimationFrame(animate);
    
    // 地球自转
    earth.rotation.y += 0.005;
    clouds.rotation.y += 0.007;
    
    // 鼠标交互
    camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
    camera.position.y += (-mouseY * 0.5 - camera.position.y) * 0.05;
    camera.lookAt(scene.position);
    
    renderer.render(scene, camera);
  }
  
  animate();
  
  // 处理窗口大小变化
  window.addEventListener('resize', () => {
    const newWidth = container.offsetWidth;
    const newHeight = container.offsetHeight;
    
    camera.aspect = newWidth / newHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(newWidth, newHeight);
  });
</script>
</body>
</html>
