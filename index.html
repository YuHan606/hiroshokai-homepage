<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Home - 広昌会協同組合</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      overflow-x: hidden;
    }
    #globe-container {
      width: 500px;
      height: 500px;
      margin: 50px auto;
      border-radius: 50%;
      overflow: hidden;
      box-shadow:
        0 0 50px rgba(102, 126, 234, 0.4),
        0 0 100px rgba(102, 126, 234, 0.2),
        inset 0 0 50px rgba(0,0,0,0.1);
    }
    canvas { display: block; border-radius: 50%; }
  </style>
</head>
<body>
<div id="globe-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
  const container = document.getElementById("globe-container");
  const width = container.offsetWidth;
  const height = container.offsetHeight;

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45, width/height, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setSize(width, height);
  renderer.setClearColor(0x000000, 0); // 透明背景
  container.appendChild(renderer.domElement);

  // 光照
  const ambientLight = new THREE.AmbientLight(0x888888);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
  directionalLight.position.set(5, 3, 5).normalize();
  scene.add(directionalLight);

  // 创建地球
  const geometry = new THREE.SphereGeometry(2, 64, 64);
  const loader = new THREE.TextureLoader();
  loader.crossOrigin = ""; // 允许跨域

  const earthTexture = loader.load(
    "https://raw.githubusercontent.com/fireship-io/threejs-earth/main/land_ocean_ice_cloud_2048.jpg", 
    () => renderer.render(scene, camera) // 确保加载后立即渲染
  );
  const earthMaterial = new THREE.MeshPhongMaterial({ map: earthTexture });
  const earth = new THREE.Mesh(geometry, earthMaterial);
  scene.add(earth);

  // 添加云层
  const cloudGeometry = new THREE.SphereGeometry(2.03, 64, 64);
  const cloudTexture = loader.load(
    "https://raw.githubusercontent.com/fireship-io/threejs-earth/main/fair_clouds_4k.png"
  );
  const cloudMaterial = new THREE.MeshLambertMaterial({
    map: cloudTexture,
    transparent: true,
    opacity: 0.5
  });
  const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
  scene.add(clouds);

  camera.position.z = 6;

  // 动画循环
  function animate() {
    requestAnimationFrame(animate);
    earth.rotation.y += 0.002; // 地球自转
    clouds.rotation.y += 0.0025; // 云层稍快
    renderer.render(scene, camera);
  }
  animate();

  // 窗口大小自适应
  window.addEventListener('resize', () => {
    const newWidth = container.offsetWidth;
    const newHeight = container.offsetHeight;
    camera.aspect = newWidth / newHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(newWidth, newHeight);
  });
</script>
</body>
</html>
